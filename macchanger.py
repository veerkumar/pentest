#!/usr/bin/python3
import os
import random
import sys
os.system('dialog --infobox "mac changer" 15 45')
os.system('sleep 2')
os.system('dialog --menu " tools" 20 50 10 "1" "manually" "2" "randam ip" 2>/tmp/macchangerchoice')

macchanger=open('/tmp/macchangerchoice')
macchoice=macchanger.read(10)
macwhile='1'
if macchoice =="1":
	while macwhile == '1':
		os.system('dialog --inputbox " enter mac address" 10 20 2>/tmp/macaddress')
		macadd=open('/tmp/macaddress')
		mac=macadd.read(100)
		os.system('dialog --menu " interface card" 20 50 10 "1" "wlan0" "2" "eth0" "3" "br0" "4" "manually" 2>/tmp/maccardchoice')
		maccardadd=open('/tmp/maccardchoice')
		maccardch=maccardadd.read(100)
		if maccardch == "1":
			card="wlan0"
		elif maccardch =="2":
			card ="eth0"
		elif maccardch == "3": 
			card ="br0"
		else:
			os.system('dialog --inputbox " enter interface card" 20 30 2>/tmp/maccardaddress')
			maccardadd=open('/tmp/maccardaddress')
			card=maccardadd.read(100)
		maccmd="ifconfig {} hw ether {}".format(card,mac)
		print(maccmd)
		maccheck=os.system(maccmd)
		print(maccheck)
		if maccheck == 0:
			os.system('dialog --infobox " mac successfully changed" 10 20 ')
			macwhile=0
			os.system('sleep 1')
		else:
			macwhile=1
			os.system('dialog --infobox "  unsuccessful attempt pls try again" 10 20 ')
			os.system('sleep 1')
else:
	while macwhile =='1':
		x=random.randint(1,99)
		y=random.randint(1,99)
		z=random.randint(1,99)
		v=random.randint(1,99)
		l=random.randint(1,99)
		m=random.randint(1,99)
		mac="{}:{}:{}:{}:{}:{}".format(x,y,z,v,l,m)
		
		os.system('dialog --menu " interface card" 20 50 10 "1" "wlan0" "2" "eth0" "3" "br0" "4" "manually" 2>/tmp/maccardchoice')
		
		maccardadd=open('/tmp/maccardchoice')
		maccardch=maccardadd.read(100)
		if maccardch == "1":
			card="wlan0"
		elif maccardch =="2":
			card ="eth0"
		elif maccardch == "3": 
			card ="br0"
		else:
			os.system('dialog --inputbox " enter interface card" 20 30 2>/tmp/maccardaddress')
			maccardadd=open('/tmp/maccardaddress')
			maccard=maccardadd.read(100)
		macdown="ifdown {} ".format(card)
		maccmd="ifconfig {} hw ether {}".format(card,mac)
		macup="ifup {}".format(card)
		a=os.system(macdown)
		maccheck=os.system(maccmd)
		b=os.system(macup)
		print(a)
		print(b)
		if maccheck == 0:
			os.system('dialog --infobox " ip successfully changed" 10 20 ')
			macwhile=0
			os.system('sleep 1')
		else:
			macwhile=1
			os.system('dialog --infobox "  unsuccessful attempt pls try again" 10 20 ')
			os.system('sleep 1')
	
