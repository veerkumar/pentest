#!/usr/bin/python
import os
import sys
#from array import array
os.system('dialog --infobox  "Welcome to Packet Crafter" 10  30')
os.system('sleep 1')
	
while(1):
	choice_packet_array_packcraft=[' -0 ', ' -1 ', ' -2 ']
	choice_flag_array_packcraft=[' -F ', ' -S ' ,' -R ', ' -A ']
	os.system('dialog --menu  "Packet Crafting" 20 40 5  "1" "Raw Packet"   "2" "ICMP Packet" "3" "UDP Packet"  2> /tmp/choice_packet_packcraft')
	choice_packet_packcraft=open('/tmp/choice_packet_packcraft').read(20)+ ' '
	os.system('dialog --menu  "Set Flag" 20 40 5 "1" "Set FIN tcp flag" "2" "Set SYN tcp flag" "3" "Set RST tcp flag" "4" "Set ACK tcp flag" 2> /tmp/choice_flag_packcraft')
	choice_flag_packcraft=open('/tmp/choice_flag_packcraft').read(20)+ ' '
	os.system('dialog --inputbox "Enter the alias ip address (spoof) .Press Enter to skip" 10 20 2> /tmp/alias_packcraft')
	alias_packcraft=open('/tmp/alias_packcraft').read(20)
	#alias_packcraft='192.168.0.1'
	if(alias_packcraft!=''):alias_packcraft=' -a '+alias_packcraft+ ' '
	os.system('dialog --inputbox "Enter the count (number of trials).Press Enter to skip" 10 20 2> /tmp/count_packcraft')
	count_packcraft=open('/tmp/count_packcraft').read(20)
	if(count_packcraft!=''):count_packcraft=' -c '+count_packcraft+ ' '
	os.system('dialog --inputbox "Enter the Interface name.Press Enter to skip" 10 20 2> /tmp/interface_packcraft')
	interface_packcraft=open('/tmp/interface_packcraft').read(20)
	if(interface_packcraft!=''):interface_packcraft=' -I '+interface_packcraft+ ' '
	os.system('dialog --inputbox "Enter the destination ip address" 10 20 2> /tmp/ip') 
	ip_packcraft=open('/tmp/ip').read(20)
	os.system('dialog --inputbox "Do you want to enter specific ports or do a generic scan?(p/g)" 10 20 2> /tmp/choice_port_packcraft')
	choice_port_packcraft=open('/tmp/choice_port_packcraft').read(20)
	if choice_port_packcraft == 'g':
		os.system('dialog --inputbox "Enter the destination port address" 10 20 2> /tmp/portl_packcraft')
		portl_packcraft=open('/tmp/portl_packcraft').read(20)
		portl_packcraft=' -p '+portl_packcraft+ ' '	
		portu_packcraft=''
	else:
		os.system('dialog --inputbox "Enter the destination lower port address" 10 20 2> /tmp/portl_packcraft')
		portl_packcraft=open('/tmp/portl_packcraft').read(20)
		portl_packcraft = ' -p ' + portl_packcraft+'-'
		os.system('dialog --inputbox "Enter the destination upper port address" 10 20 2> /tmp/portu_packcraft')
		portu_packcraft=open('/tmp/portu_packcraft').read(20)+ ' '
	#ip_packcraft=' localhost '
	os.system(' hping2 '+alias_packcraft+interface_packcraft+count_packcraft+choice_packet_array_packcraft[int(choice_packet_packcraft)-1] + choice_flag_array_packcraft[int(choice_flag_packcraft)-1] +portl_packcraft+portu_packcraft +ip_packcraft) 
	#print (' hping2 '+alias_packcraft+interface_packcraft+count_packcraft+choice_packet_array_packcraft[int(choice_packet_packcraft)-1] + choice_flag_array_packcraft[int(choice_flag_packcraft)-1] +portl_packcraft+portu_packcraft +ip_packcraft)
	a = raw_input('Press Enter to continue')
	ch=os.system('dialog --yesno "Do you want to logout"  10  40')
	if ch == 0 :
		sys.exit(1)
	else:
		pass
