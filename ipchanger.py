#!/usr/bin/python3
import os
import random
import sys
os.system('dialog --infobox "ip changer" 15 45')
os.system('sleep 2')
os.system('dialog --menu " tools" 20 50 10 "1" "manually" "2" "randam ip" 2>/tmp/ipchangerchoice')

ipchanger=open('/tmp/ipchangerchoice')
ipchoice=ipchanger.read(10)
ipwhile='1'
if ipchoice =="1":
	while ipwhile == '1':
		os.system('dialog --inputbox " enter ip address" 10 20 2>/tmp/ipaddress')
		ipadd=open('/tmp/ipaddress')
		ip=ipadd.read(100)
		os.system('dialog --menu " interface card" 20 50 10 "1" "wlan0" "2" "eth0" "3" "br0" "4" "manually" 2>/tmp/cardchoice')
		cardadd=open('/tmp/cardchoice')
		cardch=cardadd.read(100)
		if cardch == "1":
			card="wlan0"
		elif cardch =="2":
			card ="eth0"
		elif cardch == "3": 
			card ="br0"
		else:
			os.system('dialog --inputbox " enter interface card" 20 30 2>/tmp/cardaddress')
			cardadd=open('/tmp/cardaddress')
			card=cardadd.read(100)
		ipcmd="ifconfig {} {}".format(card,ip)
		print(ipcmd)
		ipcheck=os.system(ipcmd)
		print(ipcheck)
		if ipcheck == 0:
			os.system('dialog --infobox " ip successfully changed" 10 20 ')
			ipwhile=0
			os.system('sleep 1')
		else:
			ipwhile=1
			os.system('dialog --infobox "  unsuccessful attempt pls try again" 10 20 ')
			os.system('sleep 1')
else:
	while ipwhile =='1':
		x=random.randint(1,100)
		y=random.randint(0,100)
		z=random.randint(0,100)
		v=random.randint(0,200)
		ip="{}.{}.{}.{}".format(x,y,z,v)
		
		os.system('dialog --menu " interface card" 20 50 10 "1" "wlan0" "2" "eth0" "3" "br0" "4" "manually" 2>/tmp/cardchoice')
		cardadd=open('/tmp/cardchoice')
		cardch=cardadd.read(100)
		if cardch == "1":
			card="wlan0"
		elif cardch =="2":
			card ="eth0"
		elif cardch == "3": 
			card ="br0"
		else:
			os.system('dialog --inputbox " enter interface card" 20 30 2>/tmp/cardaddress')
			cardadd=open('/tmp/cardaddress')
			card=cardadd.read(100)
		ipcmd="ifconfig {} {}".format(card,ip)
		ipcheck=os.system(ipcmd)
		if ipcheck == 0:
			os.system('dialog --infobox " ip successfully changed" 10 20 ')
			ipwhile=0
			os.system('sleep 1')
		else:
			ipwhile=1
			os.system('dialog --infobox "  unsuccessful attempt pls try again" 10 20 ')
			os.system('sleep 1')
	
